# Bot
## Разархивируйте проект в выбранную вами папку на сервере или склонируйте репозитарий из github выполнив команду
```bash
git clone https://github.com/antONget/LenInfoService.git
```
## Для разворачивания телеграм-бота последовательно выполните команды:
### Создайте виртуальное окружения для проекта
```bash
python -m venv venv
```
### Активируйте его
### Windows:
```bash
venv\Scripts\activate.bat
```
### Linux
```bash
venv/Scripts/activate
```
### Установите требуемы зависисмости для проекта
```bash 
pip install -r requirements.txt
```
### Необезательный пункт
Внесите изменения в файл .env в папке config (если требуется изменить токен бота или id канала)
```python 
BOT_TOKEN="token_your_telegam_bot"
ADMIN_IDS="telegram_id manager(or admin), who will receive messages with orders"
```
### Запустите бота
```bash 
python bot.py 
```
# Инструкция по работе с телеграмм-ботом
Телеграмм бот выполнен по техническому заданию согласованного с заказчиком.
![ЛенИнфоСервис.png](%D0%9B%D0%B5%D0%BD%D0%98%D0%BD%D1%84%D0%BE%D0%A1%D0%B5%D1%80%D0%B2%D0%B8%D1%81.png)

При работе с ботом предусмотрено два режима пользовательский и административный!
### Пользовательский режим:
1. Запуск бота
2. Меню - 4 обычных кнопки
3. [Заказ автозапчастей]
Происходит последовательный сбор информации о пользователе, автомобиле и требуемых запчастях. Полученная от пользователя информация пересылается в канал
4. [Заказ запчастей мото, вело, инструменты]
Происходит последовательный сбор информации о пользователе и требуемых запчастях. Полученная от пользователя информация пересылается в канал
5. [Контакты]
Пользователю выводится информация с контактными данными
6. [Акции]
Пользователю выводится список акций. Данный раздел имеет административный режим для его правки через бота.

### Административный режим:
Административный режим позволяет добавлять новых администраторов (только для супер-админа, указанного в параметрах файла .env).
Для добавления нового администратора обязательно что бы он запустил бота, и в разделе "Добавить админа" указать его ID. 
ID пользователя может быть получен с использованием сторонних ботов или путем ввода команды /my_id, в ответ бот пришлет ID пользователя котороый ввел команду.

Все добавленные администраторы могут править раздел "Акции и скидки", тремя способами:
1. Добавить - производится добавление новой акции путем последовательного ввода 
+ Фотографии акции
+ Описания акции
+ Короткое описание для идентификации администратором (необходимо для последующего удобства их удаления)
2. Удалить - Выводится список коротких описаний имеющихся акций, в виде инлайн кнопок, нажатие одной из кнопок требует подтверждения осделанном выборе и если выбор сделан и он подтверждается то акция удаляется из раздела.
3. Удалить все акции и скидки - В этом случае очищается раздел с "Акциями и скидками"

### Команды
Бот может выполнить ряд команд, которые для скорости доступа к ним можно также добавить в выпадающий список бота.
1. /start - вывод главного меню и приветственного сообщения для "Пользовательского режима"
2. /menu - вывод главного меню "Пользовательского режима" (в отличии от команды /start приветственное сообщение не выводится)
3. /my_id - выводит ID пользователя (используется для добавления новых пользователей в качестве администраторов)
4. /admin - переход в административный режим (доступен для пользователей добавленных в качестве администраторов проекта)

### База данных
Для поддержки работы бота используеься база данных, в которой хранятся:
1. действующие акции и скидки
2. ID пользователей запустивших бот (эту информацию мождно использовать для настройки рассылок)
3. список добавленных администраторов

В качестве предложений можно расширить функционал бота и сохранять заказы, на основании которых можно формировать различную статистику.